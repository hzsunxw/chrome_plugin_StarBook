<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tokené•¿åº¦ä¿®å¤æµ‹è¯•</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; max-width: 800px; margin: 0 auto; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .problem { background: #ffebee; padding: 10px; border-left: 4px solid #f44336; margin: 10px 0; }
        .solution { background: #e8f5e8; padding: 10px; border-left: 4px solid #4caf50; margin: 10px 0; }
        .test { background: #fff3e0; padding: 10px; border-left: 4px solid #ff9800; margin: 10px 0; }
        .code { background: #f5f5f5; padding: 10px; border-radius: 4px; font-family: monospace; margin: 10px 0; }
        .token-info { background: #e3f2fd; padding: 15px; border-radius: 8px; margin: 15px 0; }
    </style>
</head>
<body>
    <h1>Tokené•¿åº¦ä¿®å¤æµ‹è¯•</h1>
    
    <div class="test-section">
        <h3>ğŸ› é—®é¢˜åˆ†æ</h3>
        
        <div class="problem">
            <h4>åŸé—®é¢˜ï¼šAIå“åº”è¢«æˆªæ–­</h4>
            <p><strong>ç°è±¡</strong>ï¼šJSONè§£æå¤±è´¥ï¼Œé”™è¯¯ä¿¡æ¯æ˜¾ç¤ºåœ¨position 414å¤„æˆªæ–­</p>
            <p><strong>åŸå› </strong>ï¼š<code>max_tokens: 512</code> å¯¹æ™ºèƒ½é—®ç­”åœºæ™¯ä¸å¤Ÿç”¨</p>
        </div>
        
        <div class="token-info">
            <h4>ğŸ“Š Tokenéœ€æ±‚åˆ†æ</h4>
            <table style="width: 100%; border-collapse: collapse;">
                <tr style="background: #f5f5f5;">
                    <th style="padding: 8px; border: 1px solid #ddd;">å†…å®¹ç±»å‹</th>
                    <th style="padding: 8px; border: 1px solid #ddd;">é¢„ä¼°Token</th>
                    <th style="padding: 8px; border: 1px solid #ddd;">è¯´æ˜</th>
                </tr>
                <tr>
                    <td style="padding: 8px; border: 1px solid #ddd;">AIå›ç­”</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">100-150</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">ç®€çŸ­å›ç­”</td>
                </tr>
                <tr>
                    <td style="padding: 8px; border: 1px solid #ddd;">3ä¸ªæ¨èç½‘ç«™</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">300-450</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">æ¯ä¸ª100-150 tokens</td>
                </tr>
                <tr>
                    <td style="padding: 8px; border: 1px solid #ddd;">JSONç»“æ„</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">50-100</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">æ‹¬å·ã€å¼•å·ç­‰</td>
                </tr>
                <tr>
                    <td style="padding: 8px; border: 1px solid #ddd;">Tipså»ºè®®</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">50-100</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">å®ç”¨å»ºè®®</td>
                </tr>
                <tr style="background: #fff3e0; font-weight: bold;">
                    <td style="padding: 8px; border: 1px solid #ddd;">æ€»è®¡</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">500-800</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">å®é™…éœ€æ±‚</td>
                </tr>
            </table>
        </div>
    </div>
    
    <div class="test-section">
        <h3>ğŸ”§ ä¿®å¤æ–¹æ¡ˆ</h3>
        
        <div class="solution">
            <h4>1. åŠ¨æ€Tokenåˆ†é…</h4>
            <div class="code">
// æ™ºèƒ½é—®ç­”ï¼š1500 tokens
if (prompt.includes('è¿”å›æ ¼å¼ï¼ˆåªè¿”å›JSON')) {
    maxTokens = 1500;
}
// å†…å®¹åˆ†æï¼š800 tokens  
else if (prompt.includes('æ€»ç»“')) {
    maxTokens = 800;
}
// é»˜è®¤ï¼š512 tokens
else {
    maxTokens = 512;
}
            </div>
        </div>
        
        <div class="solution">
            <h4>2. Tokenä½¿ç”¨ç›‘æ§</h4>
            <div class="code">
console.log('Tokenä½¿ç”¨æƒ…å†µ:', {
    completion_tokens: data.usage.completion_tokens,
    max_tokens: maxTokens,
    æ˜¯å¦æ¥è¿‘é™åˆ¶: completion_tokens / maxTokens > 0.9
});
            </div>
        </div>
        
        <div class="solution">
            <h4>3. ä¼˜åŒ–AI Prompt</h4>
            <ul>
                <li>å¼ºè°ƒ"å¿…é¡»è¿”å›å®Œæ•´çš„JSON"</li>
                <li>é™åˆ¶æè¿°é•¿åº¦ï¼ˆä¸è¶…è¿‡25å­—ï¼‰</li>
                <li>ä¼˜å…ˆä¿è¯JSONå®Œæ•´æ€§</li>
            </ul>
        </div>
    </div>
    
    <div class="test-section">
        <h3>ğŸ§ª æµ‹è¯•æ­¥éª¤</h3>
        
        <div class="test">
            <h4>æ­¥éª¤1ï¼šé‡æ–°åŠ è½½æ‰©å±•</h4>
            <p>ç¡®ä¿æ–°çš„tokenè®¾ç½®ç”Ÿæ•ˆ</p>
        </div>
        
        <div class="test">
            <h4>æ­¥éª¤2ï¼šæ‰“å¼€å¼€å‘è€…å·¥å…·</h4>
            <p>æŒ‰F12ï¼Œåˆ‡æ¢åˆ°Consoleæ ‡ç­¾ï¼ŒæŸ¥çœ‹tokenä½¿ç”¨æ—¥å¿—</p>
        </div>
        
        <div class="test">
            <h4>æ­¥éª¤3ï¼šæµ‹è¯•æ™ºèƒ½é—®ç­”</h4>
            <ol>
                <li>æ‰“å¼€æ™ºèƒ½é—®ç­”</li>
                <li>è¾“å…¥"pdfè½¬ppt"</li>
                <li>è§‚å¯Ÿæ§åˆ¶å°è¾“å‡º</li>
            </ol>
        </div>
        
        <div class="test">
            <h4>æ­¥éª¤4ï¼šæ£€æŸ¥Tokenä½¿ç”¨æƒ…å†µ</h4>
            <p>åœ¨æ§åˆ¶å°æŸ¥æ‰¾ç±»ä¼¼è¿™æ ·çš„æ—¥å¿—ï¼š</p>
            <div class="code">
Tokenä½¿ç”¨æƒ…å†µ: {
    prompt_tokens: 245,
    completion_tokens: 687,
    total_tokens: 932,
    max_tokens: 1500,
    æ˜¯å¦æ¥è¿‘é™åˆ¶: false
}
            </div>
        </div>
    </div>
    
    <div class="test-section">
        <h3>ğŸ“Š é¢„æœŸç»“æœ</h3>
        
        <div style="background: #f0f8ff; padding: 15px; border-radius: 8px;">
            <h4>æˆåŠŸæŒ‡æ ‡ï¼š</h4>
            <ul>
                <li>âœ… ä¸å†å‡ºç°JSONè§£æé”™è¯¯</li>
                <li>âœ… æ§åˆ¶å°æ˜¾ç¤º"æ£€æµ‹åˆ°æ™ºèƒ½é—®ç­”è¯·æ±‚ï¼Œä½¿ç”¨æ›´å¤§çš„tokené™åˆ¶: 1500"</li>
                <li>âœ… Tokenä½¿ç”¨æƒ…å†µæ˜¾ç¤ºcompletion_tokens < max_tokens</li>
                <li>âœ… è¿”å›å®Œæ•´çš„3ä¸ªæ¨èç½‘ç«™</li>
                <li>âœ… JSONä»¥æ­£ç¡®çš„}ç»“å°¾</li>
            </ul>
        </div>
        
        <div style="background: #fff3e0; padding: 15px; border-radius: 8px; margin-top: 15px;">
            <h4>å¦‚æœä»æœ‰é—®é¢˜ï¼š</h4>
            <ul>
                <li>ğŸ” æ£€æŸ¥æ˜¯å¦æ˜¾ç¤º"âš ï¸ AIå“åº”æ¥è¿‘tokené™åˆ¶"è­¦å‘Š</li>
                <li>ğŸ” æŸ¥çœ‹completion_tokensæ˜¯å¦æ¥è¿‘max_tokens</li>
                <li>ğŸ” å¦‚æœéœ€è¦ï¼Œå¯ä»¥è¿›ä¸€æ­¥å¢åŠ maxTokensåˆ°2000</li>
            </ul>
        </div>
    </div>
    
    <div class="test-section">
        <h3>âš™ï¸ ä¸åŒåœºæ™¯çš„Tokené…ç½®</h3>
        
        <table style="width: 100%; border-collapse: collapse; margin: 15px 0;">
            <tr style="background: #f5f5f5;">
                <th style="padding: 10px; border: 1px solid #ddd;">ä½¿ç”¨åœºæ™¯</th>
                <th style="padding: 10px; border: 1px solid #ddd;">Tokené™åˆ¶</th>
                <th style="padding: 10px; border: 1px solid #ddd;">é€‚ç”¨æƒ…å†µ</th>
            </tr>
            <tr>
                <td style="padding: 10px; border: 1px solid #ddd;">æ™ºèƒ½é—®ç­”</td>
                <td style="padding: 10px; border: 1px solid #ddd; color: #4caf50; font-weight: bold;">1500</td>
                <td style="padding: 10px; border: 1px solid #ddd;">éœ€è¦è¿”å›ç»“æ„åŒ–JSONå’Œå¤šä¸ªæ¨è</td>
            </tr>
            <tr>
                <td style="padding: 10px; border: 1px solid #ddd;">å†…å®¹åˆ†æ</td>
                <td style="padding: 10px; border: 1px solid #ddd; color: #ff9800; font-weight: bold;">800</td>
                <td style="padding: 10px; border: 1px solid #ddd;">æ€»ç»“ç½‘é¡µå†…å®¹ã€æå–å…³é”®ç‚¹</td>
            </tr>
            <tr>
                <td style="padding: 10px; border: 1px solid #ddd;">ç®€å•ä»»åŠ¡</td>
                <td style="padding: 10px; border: 1px solid #ddd;">512</td>
                <td style="padding: 10px; border: 1px solid #ddd;">ç®€çŸ­å›ç­”ã€åŸºæœ¬å¤„ç†</td>
            </tr>
        </table>
    </div>
    
    <script>
        // ç®€å•çš„tokenä¼°ç®—å·¥å…·
        function estimateTokens(text) {
            // ç²—ç•¥ä¼°ç®—ï¼šè‹±æ–‡çº¦4å­—ç¬¦=1tokenï¼Œä¸­æ–‡çº¦1.5å­—ç¬¦=1token
            const chineseChars = (text.match(/[\u4e00-\u9fff]/g) || []).length;
            const otherChars = text.length - chineseChars;
            return Math.ceil(chineseChars / 1.5 + otherChars / 4);
        }
        
        // æµ‹è¯•ç¤ºä¾‹JSONçš„tokenä¼°ç®—
        const sampleJSON = `{
            "answer": "æ¨èä»¥ä¸‹æ”¯æŒOCRè¯†åˆ«ã€å¤šè¯­è¨€åŠé«˜æ•ˆè½¬æ¢çš„PDFè½¬PPTå·¥å…·ï¼š",
            "recommendations": [
                {
                    "title": "PDF2Go",
                    "url": "https://www.pdf2go.com/pdf-to-ppt",
                    "description": "åœ¨çº¿PDFè½¬PPTå·¥å…·ï¼Œæ”¯æŒOCRè¯†åˆ«æ‰«ææ–‡ä»¶",
                    "category": "æ–‡ä»¶è½¬æ¢",
                    "tags": ["PDFè½¬æ¢", "OCRæŠ€æœ¯"],
                    "why": "æ”¯æŒæ‰¹é‡è½¬æ¢åŠæ ¼å¼ä¿ç•™"
                },
                {
                    "title": "Zamzar",
                    "url": "https://www.zamzar.com/convert/pdf-to-ppt",
                    "description": "å…è´¹åœ¨çº¿è½¬æ¢æœåŠ¡ï¼Œæ”¯æŒå¤šç§æ ¼å¼",
                    "category": "æ–‡ä»¶è½¬æ¢",
                    "tags": ["æ ¼å¼è½¬æ¢", "å…è´¹å·¥å…·"],
                    "why": "æ“ä½œç®€å•ï¼Œæ— éœ€æ³¨å†Œ"
                },
                {
                    "title": "SmallPDF",
                    "url": "https://smallpdf.com/pdf-to-ppt",
                    "description": "ä¸“ä¸šPDFå·¥å…·é›†ï¼Œè½¬æ¢è´¨é‡é«˜",
                    "category": "PDFå·¥å…·",
                    "tags": ["PDFå¤„ç†", "é«˜è´¨é‡"],
                    "why": "è½¬æ¢è´¨é‡ä¼˜ç§€ï¼Œç•Œé¢å‹å¥½"
                }
            ],
            "existingBookmarks": [],
            "tips": ["é€‰æ‹©æ”¯æŒOCRçš„å·¥å…·å¤„ç†æ‰«ææ–‡æ¡£", "è½¬æ¢åæ£€æŸ¥æ ¼å¼æ˜¯å¦æ­£ç¡®"]
        }`;
        
        console.log('=== Tokenä¼°ç®—æµ‹è¯• ===');
        console.log('ç¤ºä¾‹JSONé•¿åº¦:', sampleJSON.length, 'å­—ç¬¦');
        console.log('ä¼°ç®—Tokenæ•°:', estimateTokens(sampleJSON));
        console.log('åŸTokené™åˆ¶:', 512);
        console.log('æ–°Tokené™åˆ¶:', 1500);
        console.log('æ˜¯å¦è¶³å¤Ÿ:', estimateTokens(sampleJSON) < 1500 ? 'âœ… è¶³å¤Ÿ' : 'âŒ ä¸å¤Ÿ');
        
        window.onload = function() {
            console.log('Tokenä¿®å¤æµ‹è¯•é¡µé¢åŠ è½½å®Œæˆ');
            console.log('è¯·æŒ‰ç…§æµ‹è¯•æ­¥éª¤éªŒè¯ä¿®å¤æ•ˆæœ');
        };
    </script>
</body>
</html>
