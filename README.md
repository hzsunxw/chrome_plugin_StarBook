# Smart Bookmarker 项目概述

## 项目简介

Smart Bookmarker 是一个智能书签管理 Chrome 扩展，利用人工智能技术自动分类、总结和标记书签。该项目提供高级功能，包括 AI 驱动的分析、智能分类、问答系统和学习助手功能，并支持可选的云同步。

## 核心功能

### 1. AI 驱动的书签分析
- **自动分类**: 基于内容自动将书签分类到相关主题
- **智能摘要**: 自动生成书签内容的摘要
- **标签生成**: AI 自动生成相关标签
- **内容分析**: 分析内容类型、阅读难度等元数据

### 2. 智能分类系统
- **主题分类**: AI 生成基于主题的分类
- **置信度评分**: 每个分类都有置信度评分
- **多级分类**: 支持多层次的分类结构

### 3. 问答系统
- **自然语言搜索**: 基于书签内容的自然语言搜索
- **智能推荐**: 根据用户查询推荐相关书签
- **内容理解**: 理解书签内容语义

### 4. 学习助手
- **交互式学习**: 针对书签文章的交互式学习工具
- **知识巩固**: 帮助用户更好地理解和记忆内容

### 5. 多语言支持
- **国际化**: 支持英语和中文界面
- **本地化**: 完整的本地化字符串管理

### 6. 云同步
- **可选同步**: 支持与服务器同步书签和 AI 配置
- **实时同步**: WebSocket 实时同步
- **跨平台**: 支持多设备同步

## 技术架构

### Chrome 扩展架构

#### 核心组件
- **background.js**: 主要扩展逻辑，处理书签管理、AI 处理队列、存储同步和消息路由
- **options.html/js**: 完整设置页面，包含书签管理、文件夹树、AI 配置和问答系统
- **popup.html/js**: 紧凑弹出界面，用于快速访问书签和当前页面书签
- **manifest.json**: Chrome 扩展配置文件

#### 其他组件
- **sidepanel.html/js**: 侧边栏界面
- **newtab.html/js**: 新标签页显示收藏书签
- **learningAssistant.js**: 学习助手功能

### 服务器架构

#### 后端技术栈
- **Express.js**: Web 框架
- **MongoDB**: 数据库
- **Socket.io**: 实时同步
- **JWT**: 身份验证
- **Passport**: OAuth 集成 (Google, GitHub)

#### 服务器组件
- **server.js**: 主服务器入口点
- **routes/**: API 端点 (认证、项目、用户设置)
- **models/**: 数据库模式 (用户、项目、AI 配置)
- **services/**: 业务逻辑
- **middleware/**: 认证、错误处理、日志记录

## 数据模型

### 书签数据结构
- `clientId`: 本地书签唯一标识符
- `_id`: 服务器分配的 ID
- `aiStatus`: 处理状态 ('pending', 'processing', 'completed', 'failed')
- `smartCategories`: AI 生成的主题分类
- 增强元数据: 摘要、标签、关键点、内容类型、阅读级别

### AI 集成

#### 支持的 AI 提供商
- OpenAI (GPT 模型)
- DeepSeek
- OpenRouter

#### AI 分析级别
- **基础**: 摘要和标签
- **标准**: 基础 + 分类和关键点
- **详细**: 标准 + 内容类型、阅读级别等

## API 设计

### RESTful API
- 批量操作和初始同步
- 身份验证和用户管理
- 书签 CRUD 操作

### WebSocket
- 实时增量同步
- 实时状态更新

### 统一项目模型
- 书签和文件夹使用相同的数据结构
- 智能分类与置信度指标

## 开发指南

### Chrome 扩展开发
1. **加载扩展**: 在 Chrome 中访问 `chrome://extensions/`，启用开发者模式，加载解压的扩展
2. **测试**: 使用 Chrome DevTools 调试，检查扩展弹出窗口和选项页面
3. **本地化测试**: 在选项中切换英语和中文，验证所有 UI 字符串

### 服务器开发
1. **安装依赖**: `cd server && npm install`
2. **环境设置**: 复制 `.env.example` 到 `.env`，配置 MongoDB 连接和 JWT 密钥
3. **运行服务器**: `npm run dev` (开发) 或 `npm start` (生产)

## 文件组织

### 扩展文件
- `background.js`: 核心扩展逻辑和 AI 处理
- `options.html/js`: 主要用户界面
- `popup.html/js`: 快速访问弹出界面
- `manifest.json`: 扩展配置
- `_locales/`: 国际化文件
- `newtab.html/js`: 新标签页
- `icons/`: 扩展图标

### 服务器文件
- `server/`: 后端服务器代码
  - `server.js`: 主服务器入口点
  - `routes/`: API 端点
  - `models/`: 数据库模式
  - `services/`: 业务逻辑
  - `middleware/`: 认证和错误处理
  - `config/`: 数据库和日志记录器配置

### 文档
- `doc/`: API 文档和部署指南
  - `api5.md`: 完整的 API 规范
  - `可靠的跨平台同步解决方案.md`: 跨平台同步解决方案

## 重要实现说明

- **存储策略**: 使用 Chrome 本地存储，可选服务器同步
- **AI 队列管理**: 后台脚本管理并发 AI 处理，具有速率限制
- **消息传递**: 扩展组件通过 Chrome 运行时消息传递通信
- **错误处理**: AI API 调用和网络操作的全面错误处理
- **性能**: 实现延迟加载和高效数据结构，适用于大型书签集合
- **同步协议**: 客户端-服务器 ID 握手，实现可靠的跨平台同步

## 许可证

该项目采用 ISC 许可证。

## 版本信息

- Chrome 扩展版本: 1.5
- 服务器版本: 1.1.0
- 最后更新: 2025-11-17
